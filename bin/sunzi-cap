#!/usr/bin/env ruby
require 'pathname'

# Abort beautifully with ctrl+c.
Signal.trap(:INT) { abort "\nAborting." }

# Load the main lib and invoke CLI.
if ENV['RAILS_ENV'] == 'development'
  require './lib/sunzi'
else
  source_path = (Pathname.new(__FILE__).dirname + '../lib').expand_path

  $LOAD_PATH << source_path
  require 'sunzi'
end

if ['-v', '--version'].include? ARGV[0]
  puts Sunzi::VERSION
  exit 0
end

require 'active_support/core_ext/hash/slice'
require 'active_support/core_ext/hash/indifferent_access'
require 'active_support/ordered_hash'
require 'active_support/hash_with_indifferent_access'

Sunzi::Cli.start
